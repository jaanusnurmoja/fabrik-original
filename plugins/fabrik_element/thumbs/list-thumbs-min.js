var FbThumbsList=new Class({options:{imageover:"",imageout:"",userid:""},Implements:[Events,Options],initialize:function(b,a){this.setOptions(a);this.col=$$("."+b);this.origThumbUp={};this.origThumbDown={};this.col.each(function(e){var f=e.getParent(".fabrik_row");if(f){var d=f.id.replace("list_"+this.options.listid+"_row_","");var c=e.getElements(".thumbup");var g=e.getElements(".thumbdown");c.each(function(h){h.addEvent("mouseover",function(i){h.setStyle("cursor","pointer");h.src=this.options.imagepath+"thumb_up_in.gif"}.bind(this));h.addEvent("mouseout",function(i){h.setStyle("cursor","");if(this.options.myThumbs[d]==="up"){h.src=this.options.imagepath+"thumb_up_in.gif"}else{h.src=this.options.imagepath+"thumb_up_out.gif"}}.bind(this));h.addEvent("click",function(i){this.doAjax(h,"up")}.bind(this))}.bind(this));g.each(function(h){h.addEvent("mouseover",function(i){h.setStyle("cursor","pointer");h.src=this.options.imagepath+"thumb_down_in.gif"}.bind(this));h.addEvent("mouseout",function(i){h.setStyle("cursor","");if(this.options.myThumbs[d]==="down"){h.src=this.options.imagepath+"thumb_down_in.gif"}else{h.src=this.options.imagepath+"thumb_down_out.gif"}}.bind(this));h.addEvent("click",function(i){this.doAjax(h,"down")}.bind(this))}.bind(this))}}.bind(this))},doAjax:function(f,a){var g=f.getParent(".fabrik_row");var b=g.id.replace("list_"+this.options.listid+"_row_","");var d=document.id("count_thumb"+a+b);Fabrik.loader.start(d);this.thumb=a;var c={option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"thumbs",method:"ajax_rate",g:"element",element_id:this.options.elid,row_id:b,elementname:this.options.elid,userid:this.options.userid,thumb:this.thumb,listid:this.options.listid};new Request({url:"",data:c,onComplete:function(i){var h=document.id("count_thumbup"+b);var j=document.id("count_thumbdown"+b);var e=g.getElements(".thumbup");var k=g.getElements(".thumbdown");this.spinner.dispose();Fabrik.loader.stop(d);i=JSON.decode(i);if(i.error){console.log(i.error)}else{h.set("html",i[0]);j.set("html",i[1])}}.bind(this)}).send()}});