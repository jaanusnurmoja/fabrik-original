var FbPicklist=new Class({Extends:FbElement,initialize:function(c,b){this.plugin="fabrikpicklist";this.parent(c,b);if(this.options.allowadd===true){this.watchAdd()}var a=$(this.options.element+"_fromlist").getStyle("background-color");this.sortable=new Sortables(["#"+this.element.id+"_fromlist","#"+this.element.id+"_tolist"],{clone:true,revert:true,opacity:0.7,hovercolor:"#ffddff",onComplete:function(){this.setData()}.bind(this),onStart:function(){this.drag.addEvent("onEnter",function(d,e){if(this.lists.contains(e)){var f=new Fx.Tween(e,{wait:false,duration:600});f.start("background-color",this.options.hovercolor);if(this.lists.contains(this.drag.overed)){this.drag.overed.addEvent("mouseleave",function(){var g=new Fx.Tween(e,{wait:false,duration:600});g.start("background-color",a)})}}}.bind(this))}})},setData:function(){var a=document.id(this.options.element+"_tolist").getElements("li").map(function(c,b){return c.id.replace(this.options.element+"_value_","")}.bind(this));this.element.value=JSON.encode(a)},watchAdd:function(){var a=this.element.id;if(!document.id(this.element.id+"_dd_add_entry")){return}document.id(this.element.id+"_dd_add_entry").addEvent("click",function(d){var f;var c=document.id(a+"_ddLabel").value;if(document.id(a+"_ddVal")){f=document.id(a+"_ddVal").value}else{f=c}if(f===""||c===""){alert(Joomla.JText._("PLG_ELEMENT_PICKLIST_ENTER_VALUE_LABEL"))}else{var b=new Element("li",{"class":"picklist",id:this.element.id+"_value_"+f}).set("text",c);document.id(this.element.id+"_tolist").adopt(b);this.sortable.addItems(b);d.stop();if(document.id(a+"_ddVal")){document.id(a+"_ddVal").value=""}document.id(a+"_ddLabel").value="";this.setData();this.addNewOption(f,c)}}.bind(this))}});